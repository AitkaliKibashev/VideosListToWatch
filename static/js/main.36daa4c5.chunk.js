(this["webpackJsonpvideos-list-to-watch"]=this["webpackJsonpvideos-list-to-watch"]||[]).push([[0],{30:function(t,e,n){},31:function(t,e,n){},58:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),c=n(8),a=n.n(c),s=(n(30),n(15)),o=(n(31),n(10)),u=n(4),d=n.n(u),l=n(5),b=n(12),j=n(2),f=n(6),p=n.n(f),v="https://videoslisttowatch-default-rtdb.europe-west1.firebasedatabase.app",m=function(t,e,n){return p.a.patch("".concat(v,"/users/").concat(n,"/videos/").concat(t,".json"),{rating:e})},O=function(t,e){return p.a.post("".concat(v,"/users/").concat(e,"/videos.json"),t)},h=function(t){return p.a.get("".concat(v,"/users/").concat(t,"/videos.json"))},g=function(t,e){return p.a.delete("".concat(v,"/users/").concat(e,"/videos/").concat(t,".json"))},x=function(){return p.a.post("".concat(v,"/users.json"),{}).then((function(t){return localStorage.setItem("userId",t.data.name)}))},L="ADD_VIDEOS_TO_LIST",w="REMOVE_VIDEO_FROM_LIST",y="CHANGE_VIDEO_RATING",N="CHANGE_LOADING",V="SET_VIDEOS",I={videosList:[],isLoading:!1},S=function(t){return{type:L,payload:t}},k=function(t){return{type:w,id:t}},T=function(t,e){return{type:y,id:t,change:e}},R=function(t){return{type:N,isLoading:t}},A=localStorage.getItem("userId"),E=n(1),C=function(){return Object(E.jsx)("div",{className:"spinner-border center mt-5",role:"status",children:Object(E.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},_=function(t){var e=t.handleSubmit,n=t.inputValue,r=t.setInputValue;return Object(E.jsxs)("form",{onSubmit:e,className:"row mb-2",children:[Object(E.jsx)("div",{className:"col mb-5 mt-5",children:Object(E.jsx)("input",{value:n,onChange:function(t){return r(t.target.value)},type:"text",className:"form-control",placeholder:"https://www.youtube.com/watch?v=ctBt7T8C8QI"})}),Object(E.jsx)("button",{className:"btn btn-success mb-5 mt-5 col-3",children:"Add video to the list"})]})},D=function(t){var e=t.videosList,n=t.removeVideo,r=t.incrementRating,i=t.decrementRating;return Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{className:"video-grid",children:e.map((function(t){return t.videoId&&Object(E.jsxs)("div",{className:"video-col mb-2",children:[Object(E.jsx)("iframe",{width:"auto",height:"238",src:"https://www.youtube.com/embed/".concat(t.videoId),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),Object(E.jsxs)("div",{className:"footer",children:[Object(E.jsx)("button",{onClick:function(){return n(t.id)},className:"btn btn-danger mt-2",children:"Remove"}),Object(E.jsxs)("div",{className:"rating",children:[Object(E.jsx)("button",{onClick:function(){return r(t.id,t.rating)},className:"btn btn-primary mb-2",children:"+1"}),Object(E.jsxs)("p",{children:["Rating: ",t.rating]}),Object(E.jsx)("button",{onClick:function(){return i(t.id,t.rating)},className:"btn btn-primary mb-2",children:"-1"})]})]})]},t)}))}),!e.length&&Object(E.jsx)("h2",{className:"text-center mt-5",children:"Add some videos from Youtube"})]})};var F=Object(o.b)((function(t){return{videosList:t.mainApp.videosList,isLoading:t.mainApp.isLoading}}),{addVideoToList:function(t){return function(){var e=Object(l.a)(d.a.mark((function e(n){var r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(R(!0)),e.next=3,O(t,A);case 3:r=e.sent,i=Object(j.a)(Object(j.a)({},t),{},{id:r.data.name}),n(S(i)),n(R(!1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},removeVideoFromList:function(t){return function(){var e=Object(l.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(R(!0)),e.next=3,g(t,A);case 3:n(k(t)),n(R(!1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},incrementVideoRating:function(t,e){return function(){var n=Object(l.a)(d.a.mark((function n(r){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(R(!0)),n.next=3,m(t,e+1,A);case 3:r(T(t,1)),r(R(!1));case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},decrementVideoRating:function(t,e){return function(){var n=Object(l.a)(d.a.mark((function n(r){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(R(!0)),n.next=3,m(t,e-1,A);case 3:r(T(t,-1)),r(R(!1));case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},setVideosToList:function(){return function(){var t=Object(l.a)(d.a.mark((function t(e){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(R(!0)),t.next=3,h(A);case 3:n=t.sent,r=[],n.data&&(r=Object.keys(n.data).map((function(t){return Object(j.a)(Object(j.a)({},n.data[t]),{},{id:t})}))),e({type:V,videosList:r}),e(R(!1));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},initUser:function(){return Object(l.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A){t.next=3;break}return t.next=3,x();case 3:case"end":return t.stop()}}),t)})))}})((function(t){var e=t.videosList,n=t.addVideoToList,i=t.removeVideoFromList,c=t.incrementVideoRating,a=t.decrementVideoRating,o=t.isLoading,u=t.setVideosToList;(0,t.initUser)();var d=Object(r.useState)(""),l=Object(s.a)(d,2),b=l[0],j=l[1],f=Object(r.useState)(""),p=Object(s.a)(f,2),v=p[0],m=p[1];return Object(r.useEffect)((function(){u()}),[u]),e.sort((function(t,e){return e.rating-t.rating})),Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)("div",{className:"container",children:[Object(E.jsx)("h1",{className:"mt-3",children:"List of videos to watch"}),Object(E.jsx)(_,{handleSubmit:function(t){t.preventDefault(),m("");var e=function(t){return n({videoId:t,rating:0})};if(b&&0===b.indexOf("https")){var r=b.split("v=")[1];r||(r=b.split("be/")[1]);var i=r.indexOf("&");if(-1!==i)return e(r=r.substring(0,i)),void j("");e(r),j("")}return j(""),m("This is not link to the Youtube video")},inputValue:b,setInputValue:j}),v?Object(E.jsx)("div",{className:"alert alert-danger",role:"alert",children:v}):null,o?Object(E.jsx)(C,{}):Object(E.jsx)(D,{removeVideo:function(t){i(t)},incrementRating:function(t,e){c(t,e)},decrementRating:function(t,e){a(t,e)},videosList:e})]})})})),B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,c=e.getLCP,a=e.getTTFB;n(t),r(t),i(t),c(t),a(t)}))},G=n(11),M=n(25),Y=Object(G.b)({mainApp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case L:return Object(j.a)(Object(j.a)({},t),{},{videosList:[].concat(Object(b.a)(t.videosList),[e.payload])});case w:return Object(j.a)(Object(j.a)({},t),{},{videosList:t.videosList.filter((function(t){return t.id!==e.id}))});case y:return Object(j.a)(Object(j.a)({},t),{},{videosList:t.videosList.map((function(t){return t.id===e.id?Object(j.a)(Object(j.a)({},t),{},{rating:t.rating+e.change}):t}))});case N:return Object(j.a)(Object(j.a)({},t),{},{isLoading:e.isLoading});case V:return Object(j.a)(Object(j.a)({},t),{},{videosList:[].concat(Object(b.a)(t.videosList),Object(b.a)(e.videosList))});default:return t}}}),H=Object(G.c)(Y,Object(G.a)(M.a));a.a.render(Object(E.jsx)(o.a,{store:H,children:Object(E.jsx)(i.a.StrictMode,{children:Object(E.jsx)(F,{})})}),document.getElementById("root")),B()}},[[58,1,2]]]);
//# sourceMappingURL=main.36daa4c5.chunk.js.map